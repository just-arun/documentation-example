<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Dependency Injection | LeapJS</title>
    <meta name="description" content="Light weight framework for nodejs">
    <link rel="icon" href="/documentation-example/assets/images/logo.png">
    
    <link rel="preload" href="/documentation-example/assets/css/0.styles.736cdedd.css" as="style"><link rel="preload" href="/documentation-example/assets/js/app.d92ec17d.js" as="script"><link rel="preload" href="/documentation-example/assets/js/2.8c3fd2de.js" as="script"><link rel="preload" href="/documentation-example/assets/js/9.006f95d6.js" as="script"><link rel="prefetch" href="/documentation-example/assets/js/10.7cba59e2.js"><link rel="prefetch" href="/documentation-example/assets/js/11.6367c6fe.js"><link rel="prefetch" href="/documentation-example/assets/js/3.393194c7.js"><link rel="prefetch" href="/documentation-example/assets/js/4.397c85d0.js"><link rel="prefetch" href="/documentation-example/assets/js/5.62e6a2d6.js"><link rel="prefetch" href="/documentation-example/assets/js/6.5a8f9507.js"><link rel="prefetch" href="/documentation-example/assets/js/7.c51b4b71.js"><link rel="prefetch" href="/documentation-example/assets/js/8.962cd560.js">
    <link rel="stylesheet" href="/documentation-example/assets/css/0.styles.736cdedd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/documentation-example/" class="home-link router-link-active"><img src="/documentation-example/assets/images/logo.png" alt="LeapJS" class="logo"> <span class="site-name can-hide">LeapJS</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/documentation-example/" class="nav-link">Home</a></div><div class="nav-item"><a href="/documentation-example/guide/" class="nav-link router-link-active">Guide</a></div> <a href="https://github.com/just-arun/documentation-example" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/documentation-example/" class="nav-link">Home</a></div><div class="nav-item"><a href="/documentation-example/guide/" class="nav-link router-link-active">Guide</a></div> <a href="https://github.com/just-arun/documentation-example" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/documentation-example/guide/" class="sidebar-link">general intro</a></li><li><a href="/documentation-example/guide/dependency-injection.html" class="active sidebar-link">Dependency Injection</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/documentation-example/guide/dependency-injection.html#injectable" class="sidebar-link">@injectable</a></li><li class="sidebar-sub-header"><a href="/documentation-example/guide/dependency-injection.html#inject" class="sidebar-link">@inject</a></li></ul></li><li><a href="/documentation-example/guide/schema.html" class="sidebar-link">schema</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="dependency-injection"><a href="#dependency-injection" class="header-anchor">#</a> Dependency Injection</h1> <p>Dependency injection is an inversion of control (IoC) technique wherein you delegate instantiation of dependencies to the IoC container (in our case, the LeapJS runtime), instead of doing it in your own code imperatively.</p> <p>Leap is built around the strong design pattern commonly known as Dependency injection. We recommend reading this good <a href="https://martinfowler.com/articles/injection.html" target="_blank" rel="noopener noreferrer">article<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> by Martin Fowler to better understand the concept.</p> <p>In the example below, Leap will resolve the userService by creating and returning an instance of userService (or, in the normal case of a singleton, returning the existing instance if it has already been requested elsewhere). This dependency is resolved and passed to your controller's constructor (or assigned to the indicated property)</p> <p>An example is shown below,</p> <h2 id="injectable"><a href="#injectable" class="header-anchor">#</a> @injectable</h2> <p>First we define an injectable dependency,</p> <div class="language-ts extra-class"><pre class="language-ts"><code>@<span class="token function">injectable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Katana</span> <span class="token keyword">implements</span> <span class="token class-name">Weapon</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token function">slash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'slash!'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Then we ask Leap to inject this into another class.</p> <div class="custom-block tip"><p class="custom-block-title">Note</p> <p>that the class into which we inject dependencies can also be injectable.</p></div> <div class="language-ts extra-class"><pre class="language-ts"><code>@<span class="token function">injectable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Ninja</span> <span class="token keyword">implements</span> <span class="token class-name">Warrior</span> <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span>@<span class="token function">inject</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Katana<span class="token punctuation">)</span> <span class="token keyword">private</span> katana<span class="token punctuation">:</span> Weapon<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>katana<span class="token punctuation">.</span><span class="token function">slash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The technique shown above is called constructor-based injection, as dependencies are injected via the <code>constructor</code>.</p> <p>And while constructor based injection is the <strong>preferred approach</strong>, there are some cases where property-based injection might be useful.</p> <h2 id="inject"><a href="#inject" class="header-anchor">#</a> @inject</h2> <p>If your parent/base class has multiple dependencies, passing them up all the chain through <code>super()</code> could be tedious. In such cases, you can use <code>@inject</code> at the property level</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Injectable<span class="token punctuation">,</span> Inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@leapjs/common'</span><span class="token punctuation">;</span>

@<span class="token function">injectable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">BaseConnection</span> <span class="token punctuation">{</span>
  @<span class="token function">inject</span><span class="token punctuation">(</span>Configuration<span class="token punctuation">)</span>
  <span class="token keyword">private</span> <span class="token keyword">readonly</span> configuration<span class="token punctuation">:</span> Configuration<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/just-arun/documentation-example/edit/master/docs/guide/dependency-injection.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/13/2020, 7:28:35 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/documentation-example/guide/" class="prev router-link-active">general intro</a></span> <span class="next"><a href="/documentation-example/guide/schema.html">schema</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/documentation-example/assets/js/app.d92ec17d.js" defer></script><script src="/documentation-example/assets/js/2.8c3fd2de.js" defer></script><script src="/documentation-example/assets/js/9.006f95d6.js" defer></script>
  </body>
</html>
